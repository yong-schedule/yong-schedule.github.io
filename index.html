<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ì†”ë¼ ìŠ¤ì¼€ì¤„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- âœ… stylesheetë¡œ ìˆ˜ì • -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<style>
body { margin:0; font-family:'Roboto', system-ui, sans-serif; background:#fdfdfd; }
header { font-size:24px; font-weight:900; text-align:center; margin-top:50px; }

#calendar {
  max-width:900px;
  margin:50px auto 0;
  padding:10px;
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.05);
}

.fc-event { border:none !important; box-shadow:none !important; }
.fc .fc-toolbar-title { font-size:16px; font-weight:700; }
.fc .fc-button { font-size:12px; padding:4px 8px; background:#000; color:#fff; border:none; }

.event-legend {
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  justify-content:center;
  margin:20px 0;
  font-size:12px;
}

.event-icon { font-size:4pt; color:rgba(255,255,255,0.9); }

@media(max-width:600px){
  header { font-size:20px; margin-top:32px; }
  #calendar { max-width:98%; margin:0 auto; }
  #calendar .fc-daygrid-day { min-height:140px; }
  .fc-daygrid-day-number { font-size:6pt !important; }
}

.modal {
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#fff;
  padding:16px;
  border-radius:8px;
  max-width:90%;
  max-height:80%;
  overflow-y:auto;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  display:none;
  z-index:9999;
}
.modal.show { display:block; }

#footerLabel {
  position:fixed;
  bottom:10px;
  left:0;
  width:100%;
  text-align:center;
  font-size:10pt;
  color:#aaa;
}

@media (min-width:601px) and (max-height:700px){
  #footerLabel { display:none; }
}
</style>
</head>

<body>
<header>ğŸ“… ì†”ë¼ ìŠ¤ì¼€ì¤„</header>

<div class="event-legend" id="legend"></div>
<div id="calendar"></div>

<div id="modal" class="modal">
  <button class="close-btn">&times;</button>
  <h3>ì¼ì • ë“±ë¡ / ìˆ˜ì •</h3>
  <input id="eventTitle" placeholder="ì¼ì • ì œëª©">
  <input id="eventDate" type="date">
  <input id="eventLink" placeholder="ë§í¬ (ì„ íƒ)">
  <select id="eventType">
    <option value="">ì¢…ë¥˜ ì„ íƒ</option>
    <option>ë®¤ì§€ì»¬</option>
    <option>ì¶•í•˜</option>
    <option>ë°œë§¤</option>
    <option>ë°©ì†¡</option>
    <option>SNS</option>
    <option>ì†”ë¼ì‹œë„</option>
    <option>ê³µì‹</option>
    <option>ê¸°íƒ€</option>
  </select>
  <button id="saveBtn">ì €ì¥</button>
  <button id="deleteBtn" style="background:#ef4444;color:#fff;">ì‚­ì œ</button>
</div>

<div id="footerLabel">âœ¨ DC SOLAR GALLERY âœ¨</div>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyD7PwhcOZpYMEm4znPSkCTkKM2ZJzlmX0k",
  authDomain: "yong-schedule.firebaseapp.com",
  projectId: "yong-schedule"
});
const db = firebase.firestore();

const calendar = new FullCalendar.Calendar(document.getElementById('calendar'), {
  locale:'ko',
  firstDay:1,
  height:'auto',
  dayMinHeight: window.innerWidth > 600 ? 120 : 140,
  headerToolbar:{ left:'title', right:'prev,next today' },
  eventContent: arg => {
    const colors = {
      ë®¤ì§€ì»¬:'#EF4444', ì¶•í•˜:'#F97316', ë°œë§¤:'#10B981', ë°©ì†¡:'#3B82F6',
      SNS:'#8B5CF6', ì†”ë¼ì‹œë„:'#FACC15', ê³µì‹:'#EC4899', ê¸°íƒ€:'#000'
    };
    const size = window.innerWidth <= 600 ? '5pt' : '8pt';
    return {
      html:`<div style="
        background:${colors[arg.event.extendedProps.type] || '#aaa'};
        color:#fff; border-radius:4px; padding:1px 3px;
        font-size:${size};
      ">${arg.event.title}</div>`
    };
  }
});
calendar.render();

// âœ… ë²”ë¡€ (ë¬¸ë²• ì—ëŸ¬ ì™„ì „ ì œê±°)
(function(){
  const legend = document.getElementById('legend');
  const colors = {
    ë®¤ì§€ì»¬:'#EF4444', ì¶•í•˜:'#F97316', ë°œë§¤:'#10B981', ë°©ì†¡:'#3B82F6',
    SNS:'#8B5CF6', ì†”ë¼ì‹œë„:'#FACC15', ê³µì‹:'#EC4899', ê¸°íƒ€:'#000'
  };
  Object.keys(colors).forEach(t=>{
    const div=document.createElement('div');
    div.textContent=t;
    div.style.backgroundColor=colors[t];
    div.style.color='#fff';
    div.style.padding='2px 6px';
    div.style.borderRadius='4px';
    div.style.fontWeight='700';
    legend.appendChild(div);
  });
})();
</script>
</body>
</html>
